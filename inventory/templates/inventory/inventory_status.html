{% extends 'inventory/base.html' %}
{% load static %}
{% block title %}ì¬ê³  í˜„í™©{% endblock %}

{% block content %}
<h2>ğŸ“¦ ì¬ê³  í˜„í™©</h2>

<!-- ğŸ” í•„í„° ì˜ì—­ -->
<form method="get" class="filter-form" style="display: flex; flex-wrap: wrap; align-items: center; gap: 10px; margin-bottom: 20px;">
  <label>
    ê²€ìƒ‰:
    <input type="text" name="q" placeholder="í’ˆëª©ëª…, ì„¤ëª…, ê·œê²©" value="{{ request.GET.q|default_if_none:'' }}">
  </label>

  <button type="submit">ê²€ìƒ‰</button>

  <label>
    ì‚¬ìš©ì²˜:
    <select name="category" onchange="this.form.submit()">
      <option value="">ì „ì²´</option>
      {% for category in categories %}
      <option value="{{ category.id }}" {% if category.id|stringformat:"s" == selected_category %}selected{% endif %}>{{ category.name }}</option>
      {% endfor %}
    </select>
  </label>

  <label>
    <input type="checkbox" name="low_stock" value="1" {% if show_low_stock %}checked{% endif %} onchange="this.form.submit()">
    ğŸš¨ ì•ˆì „ì¬ê³  ì´í•˜ë§Œ ë³´ê¸°
  </label>
</form>

<!-- ğŸ“‹ ì¬ê³  í…Œì´ë¸” -->
<table class="styled-table">
  <thead>
    <tr>
      <th>í’ˆëª©</th>
      <th>ê·œê²©</th>
      <th>í˜„ì¬ ì¬ê³ </th>
      <th>ì•ˆì „ ì¬ê³ </th>
      <th>ìƒíƒœ</th>
    </tr>
  </thead>
  <tbody>
    {% for variant in variants %}
    <tr>
      <td>{{ variant.item.name }}</td>
      <td>{{ variant.spec.label }}</td>
      <td>{{ variant.current_quantity }}</td>
      <td>{{ variant.min_quantity }}</td>
      <td>
        {% if variant.current_quantity < variant.min_quantity %}
        <span class="status-low">ë¶€ì¡±</span>
        {% else %}
        <span class="status-ok">ì •ìƒ</span>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="5">ì¬ê³  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
